#summary How to build and install HeeksCAD and related projects for Ubuntu

HeeksCAD is still under heavy development so any packages you find are likely to be out of date.  To get the most current version, you need to compile the current source version from [https://github.com/Heeks git].

This installation procedure was tested on Ubuntu 11.04 (Natty Narwhal) using gnome. 

If you run into problems, check the notes and comments at the end of this page.
=For Ubuntu 10.10 only=
The version of cmake in Ubuntu 10.10 is 2.8.2. Cmake 2.8.2 has a bug that will prevent HeeksCAD and HeeksCNC from installing.  You will need to use a newer (or older) version of cmake. 

Do the following:
 # On the menubar at the top of the screen, choose System|Administration|Synaptic Package Manager
 # In Synaptic: From the menu, choose Settings|Repositories
 # Click on the Updates tab, and check the box for "unsupported updates (maverick-backports)"
 # Click the close button
 # Click Reload
 # Type `cmake` in the search box
 # Scroll through the list until you find cmake. 
 # Click the box, and on the popup menu, choose "Mark for installation"
 # In the window that appears, click Mark
 # Click apply
 # When it finishes, repeat steps 2 - 5, but in step 3 clear the checkbox
 # Close Synaptic

=For Ubuntu 8.04 only=
The opencascade libraries are not in the ubuntu multiverse for Hardy.  You can get them from opennovation.

First add the following to your /etc/apt/sources.list file
{{{
deb http://www.opennovation.org/ubuntu hardy main contrib non-free
}}}

Download the signing key available here
[http://www.opennovation.org/ubuntu/opennovation.key]

Go into synaptic.  Click the Settings -> repositories menu.
Click the 'authentication' tab and import the key file you just downloaded.


=Install the dependencies=

The following command will install the required packages.  apt-get will prompt you to accept a large number of additional dependencies.  Accept them as well.

{{{
sudo apt-get install git subversion libwxbase2.8-dev cmake build-essential libopencascade-dev libwxgtk2.8-dev libgtkglext1-dev python-dev cmake libboost-python-dev
}}}

Get a cup of coffee while all this downloads and installs.

=Downloading code=
The codebase has been transferred from subversion to git. One advantage of this is now heekscad, heekscnc, libarea, libactp, and opencamlib can be checked out with one command:
{{{
git clone --recursive git://github.com/Heeks/heekscad.git
}}}

=Install HeeksCAD=
The following commands describe how to compile and install HeeksCAD.

{{{
cd heekscad
cmake .
make package
sudo dpkg -i heekscad_*.deb
}}} 


=Install HeeksCNC=
The following commands describe how to compile and install HeeksCNC.

{{{
cd heekscad/heekscnc/
cmake .
make package
sudo dpkg -i heekscnc_*.deb  #only one .deb to install, but the filename may change
}}}


==Install the helper libraries==
HeeksCNC uses a number of libraries to perform various operations.  Install all of them or only the ones you plan to use.

===Install libarea===
area.so is required for pocket operations.

{{{
cd heekscad/heekscnc/libarea/
make clean
make
sudo make install
}}}


===Install libactp===
actp.so is required for adaptive roughing operations. *This may be removed from git soon thus you may want to skip it*

{{{
cd heeskcad/heekscnc/libactp/PythonLib
make clean
make
sudo make install
}}}

===Install opencamlib===
opencamlib is the replacement for pycam.  It's required for zigzag operations.

{{{
cd heekscad/heekscnc/opencamlib/src
make clean
cmake .
make
sudo make install
}}}

=Other Notes=
==use with default theme 'ambience'==
If you are using the default Lucid theme (Ambience).
The following bug and work-around affect the appearance of HeeksCAD in the default theme:

http://code.google.com/p/heekscad/issues/detail?id=270

==Making it go fast==
As noted above, HeeksCAD is changing all the time.  The bits of script above can be combined into one script and executed together with sudo. If run multiple times, it will check git for updates and pull them recursively (including 3rd party repos which may not be desirable!)

{{{
#!/bin/sh
# heekscad-install.sh -- Downloads, builds and installs HeeksCAD from svn


BUILDPATH=~/             # Location of HeeksCAD build dir
BUILDPREREQS="git subversion libwxbase2.8-dev cmake \
  build-essential libopencascade-dev libwxgtk2.8-dev \
  libgtkglext1-dev python-dev cmake libboost-python-dev"

# Install build prerequisites
sudo apt-get update
sudo apt-get install -y $BUILDPREREQS


#Git the HeeksCAD files and sub repos
cd $BUILDPATH
if [ -d heekscad ]; then
  cd heekscad
  git pull
  git submodule foreach --recursive git pull origin master
else
  git clone --recursive git://github.com/Heeks/heekscad.git
fi


# Install HeeksCAD
cd ${BUILDPATH}/heekscad/
cmake .
make package
sudo dpkg -i heekscad_*.deb

# Install HeeksCNC
cd ${BUILDPATH}/heekscad/heekscnc/
cmake .
make package
sudo dpkg -i heekscnc_*.deb

# Install libarea
# area.so is required for pocket operations.
cd ${BUILDPATH}/heekscad/heekscnc/libarea/
make clean
make
sudo make install

# Install libactp 
# actp.so is required for adaptive roughing operations.
#cd ${BUILDPATH}/heekscad/heekscnc/libactp/PythonLib
#make clean
#make
#sudo make install

# Install opencamlib
# opencamlib is the replacement for pycam. It's required for zigzag operations.
cd ${BUILDPATH}/heekscad/heekscnc/opencamlib/src
cmake .
make
make doc        # Creates PDF file needed by make install
sudo make install

if test $(lsb_release -s -c) = 'hardy'; then
    echo This is Ubuntu Hardy, creating symlinks
    sudo ln -fs /usr/local/lib/python2.5/dist-packages/kurve.so /usr/local/lib/python2.5/site-packages/kurve.so
    sudo ln -fs /usr/local/lib/python2.5/dist-packages/actp.so /usr/local/lib/python2.5/site-packages/actp.so
    sudo ln -fs /usr/local/lib/python2.5/dist-packages/area.so /usr/local/lib/python2.5/site-packages/area.so
fi

sudo ldconfig # Makes sure heekscnc/cad can find libraries that were just installed.

}}}



===Earlier version of Ubuntu===
This affects at least 8.04(Hardy) and may affect other releases as well.  Earlier releases using Python2.5 will look for the module in a different directory.  Make the following symlinks to enable the modules
{{{
sudo ln -s /usr/local/lib/python2.5/dist-packages/kurve.so /usr/local/lib/python2.5/site-packages/kurve.so
sudo ln -s /usr/local/lib/python2.5/dist-packages/actp.so /usr/local/lib/python2.5/site-packages/actp.so
sudo ln -s /usr/local/lib/python2.5/dist-packages/area.so /usr/local/lib/python2.5/site-packages/area.so
}}}

==A possible problem==
If you get this error:
{{{
/opt/opencascade-6.3/ros/lin/inc/Standard_Stream.hxx: At global scope:
/opt/opencascade-6.3/ros/lin/inc/Standard_Stream.hxx:84: error: ‘std::setw’ has not been declared
/opt/opencascade-6.3/ros/lin/inc/Standard_Stream.hxx:85: error: ‘std::setprecision’ has not been declared
}}}
You need to add -DHAVE_IOMANIP to CCFLAGS in src/Makefile of HeeksCAD and HeeksCNC.